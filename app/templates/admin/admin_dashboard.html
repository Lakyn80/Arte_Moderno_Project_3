{% extends "layout.html" %} {% block title %}Admin Panel{% endblock %} {% block
content %}
<h2>Admin Panel - ArteModerno</h2>

<!-- Odkaz na odhl√°≈°en√≠ -->
<a href="{{ url_for('views.logout') }}" class="btn-logout">üö™ Odhl√°sit se</a>

<!-- Sekce pro spr√°vu produkt≈Ø -->
<h3>Spr√°va produkt≈Ø</h3>
<a href="{{ url_for('admin.add_product') }}" class="btn-add-product"
  >‚ûï P≈ôidat nov√Ω produkt</a
>
<a href="{{ url_for('admin.admin_orders') }}" class="btn-action"
  >üìã Objedn√°vky</a
>
<a href="{{ url_for('admin.export_orders_csv') }}" class="btn-action"
  >üì§ Export objedn√°vek CSV</a
>
<a href="{{ url_for('admin.manage_discounts') }}" class="btn-action"
  >üí∏ Slevov√© kupony</a
>

<!-- Tabulka produkt≈Ø -->
<table class="admin-table">
  <thead>
    <tr>
      <th>Obr√°zek</th>
      <th>ID</th>
      <th>N√°zev</th>
      <th>Cena</th>
      <th>Poƒçet ks</th>
      <th>Stav</th>
      <th>Akce</th>
    </tr>
  </thead>
  <tbody>
    {% for product in products %}
    <tr>
      <td>
        {% if product.image_filename %}
        <img
          src="{{ url_for('static', filename='uploads/' ~ product.image_filename) }}"
          alt="{{ product.name }}"
          class="product-thumbnail"
        />
        {% else %}
        <span>≈Ω√°dn√Ω obr√°zek</span>
        {% endif %}
      </td>
      <td>{{ product.position_id }}</td>
      <td>{{ product.name }}</td>
      <td>{{ product.price }} Kƒç</td>
      <td>{{ product.stock }}</td>
      <td>
        {% if product.is_active %}
        <span class="status-active">Aktivn√≠</span>
        {% else %}
        <span class="status-inactive">Deaktivov√°n</span>
        {% endif %}
      </td>
      <td class="actions">
        {% if product.is_active %}
        <a
          href="{{ url_for('admin.edit_product', product_id=product.id) }}"
          class="btn-edit"
          >‚úèÔ∏è Upravit</a
        >
        <form
          method="POST"
          action="{{ url_for('admin.delete_product', product_id=product.id) }}"
          class="delete-form"
        >
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
          <button
            type="submit"
            class="btn-delete"
            onclick="return confirm('Opravdu chcete deaktivovat tento produkt?')"
          >
            üóëÔ∏è Deaktivovat
          </button>
        </form>
        {% else %}
        <form
          method="POST"
          action="{{ url_for('admin.reactivate_product', product_id=product.id) }}"
          class="reactivate-form"
        >
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
          <button
            type="submit"
            class="btn-reactivate"
            onclick="return confirm('Opravdu chcete reaktivovat tento produkt?')"
          >
            üîÑ Reaktivovat
          </button>
        </form>
        <form
          method="POST"
          action="{{ url_for('admin.hard_delete_product', product_id=product.id) }}"
          class="hard-delete-form"
        >
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
          <button
            type="submit"
            class="btn-hard-delete"
            onclick="return confirm('Opravdu chcete produkt trvale smazat?')"
          >
            ‚ùå Trvale smazat
          </button>
        </form>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<!-- Styly -->
<style>
  /* Z√°kladn√≠ styly pro nadpisy */
  h2,
  h3 {
    color: #444;
    text-align: center;
    margin-bottom: 30px;
    font-family: "Roboto", sans-serif;
  }

  /* Hlavn√≠ tlaƒç√≠tka */
  .btn-logout,
  .btn-add-product,
  .btn-action {
    display: inline-block;
    padding: 12px 20px;
    font-size: 16px;
    border-radius: 8px;
    margin: 10px;
    text-align: center;
    font-weight: bold;
    transition: background-color 0.3s ease, transform 0.2s ease;
  }

  /* Tlaƒç√≠tka pro akce */
  .btn-logout {
    background-color: #ff4d4f;
    color: white;
    text-decoration: none;
  }

  .btn-logout:hover {
    background-color: #e63946;
    transform: scale(1.05);
  }

  .btn-add-product {
    background-color: #28a745;
    color: white;
    text-decoration: none;
  }

  .btn-add-product:hover {
    background-color: #218838;
    transform: scale(1.05);
  }

  .btn-action {
    background-color: #17a2b8;
    color: white;
    text-decoration: none;
  }

  .btn-action:hover {
    background-color: #138496;
    transform: scale(1.05);
  }

  /* Tabulka produkt≈Ø */
  .admin-table {
    width: 95%;
    margin: 20px auto;
    border-collapse: collapse;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    border-radius: 8px;
    overflow: hidden;
  }

  .admin-table th,
  .admin-table td {
    padding: 12px;
    text-align: center;
    border: 1px solid #ddd;
    font-size: 14px;
  }

  .admin-table th {
    background-color: #f0f0f0;
    color: #333;
  }

  .admin-table tr:nth-child(even) {
    background-color: #f9f9f9;
  }

  /* Obr√°zky produkt≈Ø */
  .product-thumbnail {
    width: 60px;
    height: 60px;
    border-radius: 8px;
    object-fit: cover;
  }

  /* Stav produktu */
  .status-active {
    color: #28a745;
    font-weight: bold;
  }

  .status-inactive {
    color: #dc3545;
    font-weight: bold;
  }

  /* Akƒçn√≠ tlaƒç√≠tka */
  .actions a,
  .actions button {
    margin: 5px;
    padding: 8px 14px;
    font-size: 14px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .btn-edit {
    background-color: #007bff;
    color: white;
  }

  .btn-edit:hover {
    background-color: #0056b3;
  }

  .btn-delete {
    background-color: #dc3545;
    color: white;
  }

  .btn-delete:hover {
    background-color: #a71d2a;
  }

  .btn-reactivate {
    background-color: #28a745;
    color: white;
  }

  .btn-reactivate:hover {
    background-color: #218838;
  }

  .btn-hard-delete {
    background-color: #333;
    color: white;
  }

  .btn-hard-delete:hover {
    background-color: #000;
  }

  /* Formul√°≈ôe pro akce */
  .delete-form,
  .reactivate-form,
  .hard-delete-form {
    display: inline;
  }
</style>

{% endblock %}
