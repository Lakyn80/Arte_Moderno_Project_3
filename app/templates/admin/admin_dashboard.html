{% extends "base_html_section/layout.html" %} {% block title %}Admin Panel{%
endblock %} {% block css %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/admin/admin_dashboard.css') }}"
/>
{% endblock %} {% block content %}
<h2>Admin Panel - ArteModerno</h2>

<!-- Odkaz na odhlÃ¡Å¡enÃ­ (OPRAVENO) -->
<a href="{{ url_for('auth_admin.admin_logout') }}" class="btn-logout"
  >ğŸšª OdhlÃ¡sit se</a
>

<!-- Sekce pro sprÃ¡vu produktÅ¯ -->
<h3>SprÃ¡va produktÅ¯</h3>
<div class="admin-actions">
  <a href="{{ url_for('admin.add_product') }}" class="btn-add-product"
    >â• PÅ™idat novÃ½ produkt</a
  >
  <a href="{{ url_for('admin.admin_orders') }}" class="btn-action"
    >ğŸ“‹ ObjednÃ¡vky</a
  >
  <a href="{{ url_for('admin.export_orders_csv') }}" class="btn-action"
    >ğŸ“¤ Export objednÃ¡vek CSV</a
  >
  <a href="{{ url_for('admin.manage_discounts') }}" class="btn-action"
    >ğŸ’¸ SlevovÃ© kupony</a
  >
</div>

<!-- Tabulka produktÅ¯ -->
<table class="admin-table">
  <thead>
    <tr>
      <th>ObrÃ¡zek</th>
      <th>ID</th>
      <th>NÃ¡zev</th>
      <th>Cena</th>
      <th>PoÄet ks</th>
      <th>Stav</th>
      <th>Akce</th>
    </tr>
  </thead>
  <tbody>
    {% for product in products %}
    <tr>
      <td>
        {% if product.image_filename %}
        <img
          src="{{ url_for('static', filename='uploads/' ~ product.image_filename) }}"
          alt="{{ product.name }}"
          class="product-thumbnail"
        />
        {% else %}
        <span>Å½Ã¡dnÃ½ obrÃ¡zek</span>
        {% endif %}
      </td>
      <td>{{ product.position_id }}</td>
      <td>{{ product.name }}</td>
      <td>{{ product.price }} KÄ</td>
      <td>{{ product.stock }}</td>
      <td>
        {% if product.is_active %}
        <span class="status-active">AktivnÃ­</span>
        {% else %}
        <span class="status-inactive">DeaktivovÃ¡n</span>
        {% endif %}
      </td>
      <td class="actions">
        {% if product.is_active %}
        <a
          href="{{ url_for('admin.edit_product', product_id=product.id) }}"
          class="btn-edit"
          >âœï¸ Upravit</a
        >
        <form
          method="POST"
          action="{{ url_for('admin.delete_product', product_id=product.id) }}"
          class="delete-form"
        >
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
          <button
            type="submit"
            class="btn-delete"
            onclick="return confirm('Opravdu chcete deaktivovat tento produkt?')"
          >
            ğŸ—‘ï¸ Deaktivovat
          </button>
        </form>
        {% else %}
        <form
          method="POST"
          action="{{ url_for('admin.reactivate_product', product_id=product.id) }}"
          class="reactivate-form"
        >
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
          <button
            type="submit"
            class="btn-reactivate"
            onclick="return confirm('Opravdu chcete reaktivovat tento produkt?')"
          >
            ğŸ”„ Reaktivovat
          </button>
        </form>
        <form
          method="POST"
          action="{{ url_for('admin.hard_delete_product', product_id=product.id) }}"
          class="hard-delete-form"
        >
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
          <button
            type="submit"
            class="btn-hard-delete"
            onclick="return confirm('Opravdu chcete produkt trvale smazat?')"
          >
            âŒ Trvale smazat
          </button>
        </form>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
