{% extends "base_html_section/layout.html" %} {% block title %}Objedn치vky{%
endblock %} {% block css %}
<link
  rel="stylesheet"
  href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css"
/>
<link
  rel="stylesheet"
  href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.dataTables.min.css"
/>
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/admin/admin_orders.css') }}"
/>
{% endblock %} {% block content %}
<h2>游늶 P콏ehled objedn치vek</h2>

<div class="orders-wrapper">
  <form method="GET" class="filter-form">
    <input
      type="text"
      name="email"
      placeholder="Email z치kazn칤ka"
      value="{{ request.args.get('email', '') }}"
    />
    <input type="date" name="from" value="{{ request.args.get('from', '') }}" />
    <input type="date" name="to" value="{{ request.args.get('to', '') }}" />
    <button type="submit">Filtrovat</button>
  </form>

  <table class="admin-table display" id="orders-table">
    <thead>
      <tr>
        <th>캛칤slo faktury</th>
        <th>캛칤slo objedn치vky</th>
        <th>Z치kazn칤k</th>
        <th>Email</th>
        <th>Produkty</th>
        <th>Celkov치 cena</th>
        <th>Datum</th>
        <th>Stav</th>
        <th>Pozn치mka</th>
      </tr>
    </thead>
    <tfoot>
      <tr>
        <th>캛칤slo faktury</th>
        <th>캛칤slo objedn치vky</th>
        <th>Z치kazn칤k</th>
        <th>Email</th>
        <th>Produkty</th>
        <th>Celkov치 cena</th>
        <th>Datum</th>
        <th>Stav</th>
        <th>Pozn치mka</th>
      </tr>
    </tfoot>
    <tbody>
      {% for order in orders %}
      <tr>
        <td>{{ order.invoice_number or "-" }}</td>
        <td>
          <a href="{{ url_for('admin.order_detail', order_id=order.id) }}">
            {{ order.order_number or order.id }}
          </a>
        </td>
        <td>
          <a href="{{ url_for('admin.user_detail', user_id=order.user.id) }}">
            {{ order.user.first_name }} {{ order.user.last_name }}
          </a>
        </td>
        <td>{{ order.user.email }}</td>
        <td>
          <ul>
            {% for item in order.items %}
            <li>{{ item.product.name }} ({{ item.quantity }} ks)</li>
            {% endfor %}
          </ul>
        </td>
        <td>{{ "%.2f"|format(order.total_price) }} K캜</td>
        <td>{{ order.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
        <td>
          {% if order.status == "zaplaceno" %}
          <span class="badge badge-paid">Zaplaceno</span>
          {% elif order.status == "캜ek치" %}
          <span class="badge badge-pending">캛ek치</span>
          {% elif order.status == "zru코eno" %}
          <span class="badge badge-cancelled">Zru코eno</span>
          {% else %}
          <span class="badge badge-other"
            >{{ order.status or "neuvedeno" }}</span
          >
          {% endif %}
        </td>
        <td>{{ order.note or "-" }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %} {% block scripts %}
<script src="{{ url_for('static', filename='admin/js/admin_orders.js') }}"></script>
{% endblock %}
